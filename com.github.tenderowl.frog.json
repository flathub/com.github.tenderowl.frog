{
    "app-id": "com.github.tenderowl.frog",
    "runtime": "org.gnome.Platform",
    "runtime-version": "43",
    "sdk": "org.gnome.Sdk",
    "command": "frog",
    "finish-args": [
        "--share=network",
        "--share=ipc",
        "--socket=fallback-x11",
        "--socket=wayland",
        "--device=dri",
        "--env=LD_LIBRARY_PATH=/app/lib",
        "--talk-name=org.freedesktop.Notifications",
        "--filesystem=xdg-pictures"
    ],
    "cleanup": [
        "/include",
        "/lib/pkgconfig",
        "/man",
        "/share/doc",
        "/share/gtk-doc",
        "/share/man",
        "/share/pkgconfig",
        "*.la",
        "*.a"
    ],
    "modules": [
        {
          "name": "leptonica",
          "rm-configure": true,
          "config-opts": [
            "--disable-static"
          ],
          "sources": [
            {
              "type": "archive",
              "url": "https://github.com/DanBloomberg/leptonica/releases/download/1.83.1/leptonica-1.83.1.tar.gz",
              "sha256": "8f18615e0743af7df7f50985c730dfcf0c93548073d1f56621e4156a8b54d3dd"
            }
          ]
        },
        {
          "name": "tesseract",
          "config-opts": [
            "--disable-static",
            "--disable-graphics",
            "--enable-legacy"
          ],
          "sources": [
            {
              "type": "git",
              "url": "https://github.com/tesseract-ocr/tesseract.git",
              "tag": "5.3.0"
            }
          ],
          "post-install": [
            "chmod +x /app/bin/tesseract"
          ]
        },
        {
            "name": "libportal",
            "buildsystem": "meson",
            "builddir": true,
            "config-opts": [
                "-Dbackends=gtk3",
                "-Ddocs=false"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/flatpak/libportal/releases/download/0.6/libportal-0.6.tar.xz",
                    "sha256": "88a12c3ba71bc31acff7238c280de697d609cebc50830c3766776ec35abc6566"
                }
            ]
        },
        {
            "name": "zbar",
            "config-opts": [
                "--without-qt",
                "--without-qt5",
                "--without-gtk",
                "--without-xv",
                "--without-imagemagick",
                "--without-dbus",
                "--disable-video",
                "--without-java",
                "--without-python",
                "--with-doc=no",
                "--disable-doc",
                "--with-introspection=no",
                "--enable-codes=qrcode"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://linuxtv.org/downloads/zbar/zbar-0.23.tar.gz",
                    "sha256": "ac52763a7dd6ddc53ca6cd75ccee14f7abf6ae46ecb31137d025af123edd33bf"
                },
                {
                    "type": "script",
                    "dest-filename": "autogen.sh",
                    "commands": [
                        "autoreconf -vfi -W none"
                    ]
                }
            ]
        },
        {
          "name": "python3-pytesseract",
          "buildsystem": "simple",
          "build-commands": [
            "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"pytesseract\" --no-build-isolation"
          ],
          "sources": [
            {
              "type": "file",
              "url": "https://files.pythonhosted.org/packages/bc/07/830784e061fb94d67649f3e438ff63cfb902dec6d48ac75aeaaac7c7c30e/Pillow-9.4.0.tar.gz",
              "sha256": "a1c2d7780448eb93fbcc3789bf3916aa5720d942e37945f4056680317f1cd23e"
            },
            {
              "type": "file",
              "url": "https://files.pythonhosted.org/packages/ed/35/a31aed2993e398f6b09a790a181a7927eb14610ee8bbf02dc14d31677f1c/packaging-23.0-py3-none-any.whl",
              "sha256": "714ac14496c3e68c99c29b00845f7a2b85f3bb6f1078fd9f72fd20f0570002b2"
            },
            {
              "type": "file",
              "url": "https://files.pythonhosted.org/packages/c5/54/ec007336f38d2d4ce61f3544af3e6855dacbf04a1ac8294f10cabe81146f/pytesseract-0.3.10-py3-none-any.whl",
              "sha256": "8f22cc98f765bf13517ead0c70effedb46c153540d25783e04014f28b55a5fc6"
            }
          ]
        },
        {
            "name": "python3-pyzbar",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"pyzbar\" --no-build-isolation"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/6d/24/81ebe6a1c00760471a3028a23cbe0b94e5fa2926e5ba47adc895920887bc/pyzbar-0.1.9-py2.py3-none-any.whl",
                    "sha256": "4559628b8192feb25766d954b36a3753baaf5c97c03135aec7e4a026036b475d"
                }
            ]
        },
        {
            "name": "frog",
            "builddir": true,
            "buildsystem": "meson",
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/tenderowl/frog.git",
                    "tag": "1.3.0"
                }
            ]
        }
    ]
}
